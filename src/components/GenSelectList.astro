---
import GenSelectButton from "./GenSelectButton.astro";
const generations = [
	{ id: 1 },
	{ id: 2 },
	{ id: 3 },
	{ id: 4 },
	{ id: 5 },
	{ id: 6 },
	{ id: 7 },
	{ id: 8 },
	{ id: 9 },
	{ id: "alt" },
];
---

<div class="gen-select">
	{
		generations.map((generation) => (
			<form class="gen-form">
				<GenSelectButton id={generation.id} />
			</form>
		))
	}
</div>

<style>
	.gen-select {
		position: absolute;
		bottom: 20px;
		left: 20px;
		display: flex;
		gap: 12px;
	}
	@media (width < 992px) {
		.gen-select {
			top: 20px;
			right: 20px;
			gap: 10px 25px;
			bottom: initial;
			left: initial;
			flex-direction: column;
		}
	}
	@media (width < 600px) {
		.gen-select {
			flex-wrap: wrap-reverse;
			height: 255px;
			opacity: 0.5;
			transition: all 0.3s;

			&:is(:hover, :focus-within) {
				opacity: 1;
			}
		}
	}
</style>

<script>
	const genForms = document.querySelectorAll(
		".gen-form"
	) as NodeListOf<HTMLFormElement>;

	genForms.forEach((form) => {
		form.addEventListener("submit", (e) => {
			e.preventDefault();
			const formData = new FormData(form);
			const selectedGen = formData.get("gen-select") as string;

			document.location.href = `/pokedex/gen-${selectedGen}`;
		});
	});
</script>
